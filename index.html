<html>
  <head>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <script src="/constants.js"></script>
    <script src="/interface.js"></script>
  </head>
  <body>
    <h1 style="text-align: center">StuckShop</h1>
    <main role="main" class="container" style="position:relative; top:20px; width:75%">
      <p>You have £<b id="n_tokens"></b> out of £<b id="total_tokens"></b> in circulation.</p>
      <p>You <b id="yeeter"></b> a yeeter.</p>

      <script>
        function update_balance() { get_balance().then(function (b) { document.getElementById("n_tokens").innerHTML = b.toFixed(2); });}
        function update_total() { total_supply().then(function (b) { document.getElementById("total_tokens").innerHTML = b.toFixed(2); });}
        function update_all() { update_balance(); update_total(); }
        ATS.Transfer().watch(function() { update_all(); });
        update_all();
      </script>

      <div class="input-group">
        <div class="input-group-prepend">
           <span class="input-group-text">£</span>
        </div>
        <input id="n_tokens" type="number" step="0.01" class="form-control">
        <div class="input-group-append">
           <span class="input-group-text">ATS</span>
        </div>
      </div>
      <div class="input-group">
        <div class="input-group-prepend">
          <span class="input-group-text">Target</span>
        </div>
        <input id="n_tokens" class="form-control">
        <div class="input-group-append">
          <span class="input-group-text">Target</span>
        </div>

      </div>

      <div id="yeeter-only" style="display:none">
        <button onclick="mint(document.getElementById('n_tokens').value)" class="btn btn-warning btn-block">mint</button>
        <button onclick="yeet()" class="btn btn-danger btn-block">yeet</button>
      </div>
      <script>
        function update_is_yeeter() { total_supply().then(function (b) { document.getElementById("yeeter").innerHTML = is_yeeter() ? "are" : "aren't"; });}
        function update_yeeter_only() { total_supply().then(function (b) { document.getElementById("yeeter-only").style.display = is_yeeter() ? "block" : "none"; });}
        function update_yeet_all() { update_is_yeeter(); update_yeeter_only(); }
        ATS.YeeterAdded().watch(function() { update_yeet_all(); });
        ATS.YeeterRemoved().watch(function() { update_yeet_all(); });
        update_yeet_all();
      </script>
    </main>
  </body>
</html>
